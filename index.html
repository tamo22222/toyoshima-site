<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>とびしまカー活用のアイデア</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="hero">
  <h1>車で、豊島の暮らしを支える</h1>
  <p>呉市豊島を題材にした、移動支援の事業アイデア</p>
  <img src="images/toyoshima.jpg" alt="豊島の風景">
</header>


<section>
  <h2>背景</h2>
  <p>
    豊島では、日常の移動が必要な場面が多くあります。
    しかし、公共交通の少なさや高齢化により、
    移動そのものが負担になることもあります。
  </p>
</section>

<section class="cards">
  <div class="card">
    <h3>買い物代行</h3>
    <p>車でまとめて買い物し、島内へ届ける想定です。</p>
  </div>
  <div class="card">
    <h3>移動型そうざい販売</h3>
    <p>調理が難しい高齢者に向けた、キッチンカー兼宅配サービスを行います。</p>
  </div>
  <div class="card">
    <h3>島内なんでも便</h3>
    <p>荷物運搬やちょっとした用事を代行します。</p>
  </div>
</section>

<section id="todayStatus" class="today-status">
  <h2>本日の運行状況</h2>
  <p>読み込み中...</p>
</section>


<section class="calendar-section">
  <h2>活動予定カレンダー</h2>
  <p class="section-desc">
    移動支援カーの運行予定です。天候等により変更される場合があります。
  </p>

  <div class="calendar-wrapper">
    <iframe
      src="https://calendar.google.com/calendar/embed?src=a622c89a828f5f5b9a69926fc2b6e94696c8d5e1fce7ac30a4c45bf947aa773a%40group.calendar.google.com&ctz=Asia%2FTokyo"
      frameborder="0"
      scrolling="no">
    </iframe>
  </div>
</section>


<section>
  <h2>このアイデアについて</h2>
<iframe
  src="https://docs.google.com/forms/d/e/1FAIpQLScbmn66-B9VKijMMi0ia_doxCmfsvTQxUbrWEP2CDWDjIeh6w/viewform?embedded=true"
  width="100%"
  height="900"
  frameborder="0"
  marginheight="0"
  marginwidth="0">
読み込んでいます…
</iframe>
<p class="note">
本アンケートは、呉市豊島における移動支援サービス検討のための
意見収集を目的としています。
個人が特定される情報は収集しません。
</p>


</section>

<footer>
  <p>制作：呉高専島おこしIW</p>
</footer>

<script>
const calendarId = "ここにカレンダーIDを入れる";
const apiKey = "ここにAPIキーを入れる";

const today = new Date().toISOString().split("T")[0];
const url = `https://www.googleapis.com/calendar/v3/calendars/${calendarId}/events?key=${apiKey}&timeMin=${today}T00:00:00Z&timeMax=${today}T23:59:59Z&singleEvents=true&orderBy=startTime`;

fetch(url)
  .then(res => res.json())
  .then(data => {
    const box = document.getElementById("todayStatus");

    if (data.items && data.items.length > 0) {
      const event = data.items[0];
      box.classList.add("open");
      box.innerHTML = `
        <h2>本日の運行状況</h2>
        <p>🟢 本日は運行日です</p>
        <p>${event.summary}</p>
      `;
    } else {
      box.classList.add("close");
      box.innerHTML = `
        <h2>本日の運行状況</h2>
        <p>🔴 本日は運行していません</p>
      `;
    }
  })
  .catch(() => {
    document.getElementById("todayStatus").innerHTML =
      "<p>予定情報を取得できませんでした</p>";
  });
</script>

</body>
</html>













